# =============================================================================
# TREQ Backend - Dependências Python
# =============================================================================
# Versão: 1.1.0
# Atualizado: Janeiro 2026
# =============================================================================

# -----------------------------------------------------------------------------
# Core Framework
# -----------------------------------------------------------------------------
fastapi>=0.109.0,<1.0.0        # Web framework assíncrono
uvicorn[standard]>=0.27.0       # ASGI server
pydantic>=2.7.0,<3.0.0          # Validação de dados (breaking changes em v3)
pydantic-settings>=2.1.0,<3.0.0 # Configurações via ambiente

# -----------------------------------------------------------------------------
# Database & Vector Store
# -----------------------------------------------------------------------------
supabase==2.11.0                 # Versão estável (evita dependências de build pesadas)
pgvector>=0.2.0,<0.4.0          # Extensão para vetores
psycopg2-binary>=2.9.0,<3.0.0   # Driver PostgreSQL

# -----------------------------------------------------------------------------
# Embeddings & RAG
# -----------------------------------------------------------------------------
# sentence-transformers removido para economizar espaço no Render Free Tier
# Usaremos Google Gemini Embeddings (API)
langchain>=0.3.27,<0.4.0             # Framework LLM
langchain-community>=0.3.27,<0.4.0   # Integrações da comunidade
langsmith>=0.1.0                 # Observabilidade e tracing

# -----------------------------------------------------------------------------
# LLM & APIs
# -----------------------------------------------------------------------------
groq>=0.36.0,<1.0.0              # API Groq (Llama models + Whisper)
google-genai==1.2.0              # Pin em versão estável do novo SDK
zai-sdk>=0.2.0,<1.0.0            # Zhipu AI (GLM 4)

# -----------------------------------------------------------------------------
# HTTP & Networking
# -----------------------------------------------------------------------------
httpx>=0.26.0,<0.28.0            # Cliente HTTP assíncrono (compatível com supabase)
requests>=2.31.0                 # Cliente HTTP síncrono

# -----------------------------------------------------------------------------
# Utilities
# -----------------------------------------------------------------------------
python-dotenv>=1.0.0             # Carregamento de .env
python-multipart>=0.0.6          # Upload de arquivos no FastAPI
loguru>=0.7.0                    # Logging avançado
slowapi>=0.1.0                   # Rate limiting
pybreaker>=1.0.0,<2.0.0          # Circuit breakers
PyYAML>=6.0                      # Leitura de YAML
cachetools>=5.3.0                # Caching agressivo
psutil>=5.9.0                    # System metrics
tenacity>=8.2.0                  # Retry logic with backoff

# -----------------------------------------------------------------------------
# Audio Processing
# -----------------------------------------------------------------------------
pydub>=0.25.0                    # Manipulação de áudio

# -----------------------------------------------------------------------------
# Document Processing
# -----------------------------------------------------------------------------
PyPDF2>=3.0.0                    # Extração de texto de PDFs
pdfplumber>=0.11.0               # PDFs com suporte a tabelas
openpyxl>=3.1.0                  # Leitura/escrita de Excel
pandas>=2.0.0                    # Processamento de dados
python-docx>=1.1.0               # Leitura de DOCX
python-pptx>=0.6.23              # Leitura de PPTX

# -----------------------------------------------------------------------------
# Development & Testing
# -----------------------------------------------------------------------------
pytest>=8.0.0                    # Framework de testes
pytest-asyncio>=0.21.0           # Suporte async para pytest
pytest-cov>=4.0.0                # Cobertura de código
ruff>=0.1.0                      # Linter e formatter
bandit>=1.7.5                    # Análise de segurança

# =============================================================================
# NOTAS PARA INSTALAÇÃO
# =============================================================================
# 
# 1. Instalação padrão:
#    pip install -r requirements.txt
#
# 2. Para usar GLM 4 (Zhipu AI), instale manualmente:
#    pip install "zai-sdk>=0.3.1,<1.0.0"
#
# 3. Para OCR e Visão:
pytesseract>=0.3.10
pdf2image>=1.17.0
Pillow>=10.0.0
# (requer Tesseract e Poppler instalados no sistema)
#
# =============================================================================
